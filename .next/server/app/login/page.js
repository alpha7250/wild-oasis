(()=>{var e={};e.id=626,e.ids=[626],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},25576:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>b,originalPathname:()=>l,pages:()=>u,routeModule:()=>p,tree:()=>c});var a=r(50482),s=r(69108),i=r(62563),o=r.n(i),n=r(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,29925)),"C:\\Users\\aman7\\Downloads\\Compressed\\ultimate-react-course-main\\21-the-wild-oasis-website\\final-6-after-server-actions\\app\\login\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,57575)),"C:\\Users\\aman7\\Downloads\\Compressed\\ultimate-react-course-main\\21-the-wild-oasis-website\\final-6-after-server-actions\\app\\layout.js"],error:[()=>Promise.resolve().then(r.bind(r,60826)),"C:\\Users\\aman7\\Downloads\\Compressed\\ultimate-react-course-main\\21-the-wild-oasis-website\\final-6-after-server-actions\\app\\error.js"],loading:[()=>Promise.resolve().then(r.bind(r,65016)),"C:\\Users\\aman7\\Downloads\\Compressed\\ultimate-react-course-main\\21-the-wild-oasis-website\\final-6-after-server-actions\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,46178)),"C:\\Users\\aman7\\Downloads\\Compressed\\ultimate-react-course-main\\21-the-wild-oasis-website\\final-6-after-server-actions\\app\\not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\aman7\\Downloads\\Compressed\\ultimate-react-course-main\\21-the-wild-oasis-website\\final-6-after-server-actions\\app\\login\\page.js"],l="/login/page",b={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},88214:(e,t,r)=>{let a={"0f09d4a8c26f8d2c925ceab04583ffae2ab1ea5e":()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.signOutAction),"4d8a75d4b016293d2823e129c1e4faba360bc42d":()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.updateBooking),"82160a7d1ca276b33147286893c18c4c3da8b516":()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.createBooking),e5a337733ade2505cb595996d764c194ea0bfef1:()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.updateGuest),f0b8d886889679ea4c676c9c9bba9d7f388b5505:()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.deleteBooking),f6c79ea63b4dfd53b992fdbbda5a127086afb96e:()=>Promise.resolve().then(r.bind(r,10752)).then(e=>e.signInAction)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"0f09d4a8c26f8d2c925ceab04583ffae2ab1ea5e":s.bind(null,"0f09d4a8c26f8d2c925ceab04583ffae2ab1ea5e"),"4d8a75d4b016293d2823e129c1e4faba360bc42d":s.bind(null,"4d8a75d4b016293d2823e129c1e4faba360bc42d"),"82160a7d1ca276b33147286893c18c4c3da8b516":s.bind(null,"82160a7d1ca276b33147286893c18c4c3da8b516"),e5a337733ade2505cb595996d764c194ea0bfef1:s.bind(null,"e5a337733ade2505cb595996d764c194ea0bfef1"),f0b8d886889679ea4c676c9c9bba9d7f388b5505:s.bind(null,"f0b8d886889679ea4c676c9c9bba9d7f388b5505"),f6c79ea63b4dfd53b992fdbbda5a127086afb96e:s.bind(null,"f6c79ea63b4dfd53b992fdbbda5a127086afb96e")}},10752:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createBooking:()=>u,deleteBooking:()=>l,signInAction:()=>p,signOutAction:()=>f,updateBooking:()=>b,updateGuest:()=>c});var a=r(31542);r(68616);var s=r(42735),i=r(66563),o=r(61024),n=r(66864),d=r(867);async function c(e){let t=await (0,s.I8)();if(!t)throw Error("You must be logged in");let r=e.get("nationalID"),[a,i]=e.get("nationality").split("%");if(!/^[a-zA-Z0-9]{6,12}$/.test(r))throw Error("Please provide a valid national ID");let{data:d,error:c}=await o.O.from("guests").update({nationality:a,countryFlag:i,nationalID:r}).eq("id",t.user.guestId);if(c)throw Error("Guest could not be updated");(0,n.revalidatePath)("/account/profile")}async function u(e,t){let r=await (0,s.I8)();if(!r)throw Error("You must be logged in");let a={...e,guestId:r.user.guestId,numGuests:Number(t.get("numGuests")),observations:t.get("observations").slice(0,1e3),extrasPrice:0,totalPrice:e.cabinPrice,isPaid:!1,hasBreakfast:!1,status:"unconfirmed"},{error:i}=await o.O.from("bookings").insert([a]);if(i)throw Error("Booking could not be created");(0,n.revalidatePath)(`/cabins/${e.cabinId}`),(0,d.redirect)("/cabins/thankyou")}async function l(e){let t=await (0,s.I8)();if(!t)throw Error("You must be logged in");if(!(await (0,i.aL)(t.user.guestId)).map(e=>e.id).includes(e))throw Error("You are not allowed to delete this booking");let{error:r}=await o.O.from("bookings").delete().eq("id",e);if(r)throw Error("Booking could not be deleted");(0,n.revalidatePath)("/account/reservations")}async function b(e){let t=Number(e.get("bookingId")),r=await (0,s.I8)();if(!r)throw Error("You must be logged in");if(!(await (0,i.aL)(r.user.guestId)).map(e=>e.id).includes(t))throw Error("You are not allowed to update this booking");let a={numGuests:Number(e.get("numGuests")),observations:e.get("observations").slice(0,1e3)},{error:c}=await o.O.from("bookings").update(a).eq("id",t).select().single();if(c)throw Error("Booking could not be updated");(0,n.revalidatePath)(`/account/reservations/edit/${t}`),(0,n.revalidatePath)("/account/reservations"),(0,d.redirect)("/account/reservations")}async function p(){await (0,s.zB)("google",{redirectTo:"/account"})}async function f(){await (0,s.w7)({redirectTo:"/"})}(0,r(42053).h)([c,u,l,b,p,f]),(0,a.j)("e5a337733ade2505cb595996d764c194ea0bfef1",c),(0,a.j)("82160a7d1ca276b33147286893c18c4c3da8b516",u),(0,a.j)("f0b8d886889679ea4c676c9c9bba9d7f388b5505",l),(0,a.j)("4d8a75d4b016293d2823e129c1e4faba360bc42d",b),(0,a.j)("f6c79ea63b4dfd53b992fdbbda5a127086afb96e",p),(0,a.j)("0f09d4a8c26f8d2c925ceab04583ffae2ab1ea5e",f)},29925:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>o});var a=r(25036),s=r(10752);let i=function(){return a.jsx("form",{action:s.signInAction,children:(0,a.jsxs)("button",{className:"flex items-center gap-6 text-lg border border-primary-300 px-10 py-4 font-medium",children:[a.jsx("img",{src:"https://authjs.dev/img/providers/google.svg",alt:"Google logo",height:"24",width:"24"}),a.jsx("span",{children:"Continue with Google"})]})})},o={title:"Login"};function n(){return(0,a.jsxs)("div",{className:"flex flex-col gap-10 mt-10 items-center",children:[a.jsx("h2",{className:"text-3xl font-semibold",children:"Sign in to access your guest area"}),a.jsx(i,{})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,548,85,38,864,222,853],()=>r(25576));module.exports=a})();